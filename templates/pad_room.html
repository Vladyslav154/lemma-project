{% extends "base.html" %}

{% block content %}
<div id="password-overlay">
    <div class="form-container">
        <h1 id="password-title">{{ t('password_set_title') }}</h1>
        <p id="password-subtitle">{{ t('password_set_subtitle') }}</p>
        <form id="password-form" class="chat-form">
            <input type="password" id="password-input" placeholder="{{ t('password_placeholder') }}">
            <button type="submit" id="password-button" disabled>{{ t('enter_button') }}</button>
        </form>
        <p id="password-error" class="error-message"></p>
    </div>
</div>

<div id="chat-container" class="hidden">
    <div class="form-container">
        <h1>{{ t('pad_page_title') }}</h1>
        <p>{{ t('pad_room_subtitle') }} <strong>{{ room_id }}</strong>. {{ t('pad_disclaimer') }}</p>
        
        <div id="messages" class="chat-box"></div>

        <form id="message-form" class="chat-form">
            <textarea id="message-input" placeholder="{{ t('message_placeholder') }}" rows="1"></textarea>
            <div class="lifetime-controls">
                <button type="button" class="lifetime-btn active" data-lifetime="10">10с</button>
                <button type="button" class="lifetime-btn" data-lifetime="30">30с</button>
                <button type="button" class="lifetime-btn" data-lifetime="120">2м</button>
            </div>
            <button type="submit" id="send-button">»</button>
        </form>
    </div>
</div>

<style>
    /* ... ваши стили ... */
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // ... весь JS-код остается тем же ...
        const passwordTitle = document.getElementById('password-title');
        const passwordSubtitle = document.getElementById('password-subtitle');

        socket.onmessage = function(event) {
            const data = JSON.parse(event.data);
            if (data.type === "auth_success") {
                showChat();
                socket.onmessage = handleChatMessage;
            } else if (data.type === "auth_fail") {
                passwordError.textContent = data.message;
                passwordInput.value = '';
                passwordButton.disabled = true;
            } else if (data.type === "auth_required") {
                if (data.action === 'enter') {
                    passwordTitle.textContent = "{{ t('password_enter_title') }}";
                    passwordSubtitle.textContent = "{{ t('password_enter_subtitle') }}";
                }
            }
        };
        // ... остальной JS ...
    });
</script>
{% endblock %}